import{a as o,G as r,j as n,T as I,d as a,P as z,r as h,f as j,J as k,Q as w,w as _,U as B,V as H,M as G,C as V,B as c,W as $,A as Y,n as W,X as J,Y as X,Z as f,_ as D,$ as K,a0 as ee,a1 as ne}from"./index.a1d4c93e.js";function A({layout:e="horizontal",name:i,value:s}){return o(r,{container:!0,alignItems:"center",direction:e==="horizontal"?"row":"column",justifyContent:e==="horizontal"?"space-between":void 0,spacing:4,children:[n(r,{item:!0,children:n(I,{withLetterSpacing:!0,fontWeight:500,children:i})}),n(r,{item:!0,children:n(I,{fontSize:14,children:s})})]})}function te({color:e=a.color,size:i=a.size,...s}){return n("svg",{...s,height:i,viewBox:"0 0 48 48",width:i,xmlns:"http://www.w3.org/2000/svg",children:n("path",{d:"M22.2 28.3h3.6v-6.5h6.5v-3.6h-6.5v-6.5h-3.6v6.5h-6.5v3.6h6.5ZM2.75 45.25V7.45q0-1.9 1.375-3.325Q5.5 2.7 7.45 2.7h33.1q1.9 0 3.325 1.425Q45.3 5.55 45.3 7.45v25.1q0 1.9-1.425 3.3t-3.325 1.4h-29.8Zm4.7-10.3 2.4-2.4h30.7V7.45H7.45Zm0-27.5v27.5Z",fill:e})})}function re({color:e=a.color,size:i=a.size,...s}){return n("svg",{...s,height:i,viewBox:"0 0 48 48",width:i,xmlns:"http://www.w3.org/2000/svg",children:n("path",{d:"M9.35 39.05h1.6L32.7 17.2l-1.6-1.6L9.35 37.45Zm30.5-23.95-6.6-6.6 1.05-1.1q1.4-1.4 3.325-1.425Q39.55 5.95 40.95 7.3l.9.9q1.15 1.1 1.025 2.55-.125 1.45-1.125 2.45Zm-2.05 2.05L12.35 42.6h-6.6V36l25.4-25.4Zm-5.85-.75-.85-.8 1.6 1.6Z",fill:e})})}function ie({color:e=a.color,size:i=a.size,...s}){return n("svg",{...s,height:i,viewBox:"0 0 48 48",width:i,xmlns:"http://www.w3.org/2000/svg",children:n("path",{d:"M37.2 26.4v-6.2H31v-3.6h6.2v-6.2h3.6v6.2H47v3.6h-6.2v6.2Zm-18.95-3.1q-3.9 0-6.35-2.45-2.45-2.45-2.45-6.3 0-3.85 2.45-6.3 2.45-2.45 6.35-2.45 3.85 0 6.3 2.45Q27 10.7 27 14.55q0 3.85-2.45 6.3-2.45 2.45-6.3 2.45ZM.95 41.9v-6.05q0-2.1 1.1-3.8 1.1-1.7 3-2.6 3.85-1.7 6.925-2.4 3.075-.7 6.275-.7t6.275.7q3.075.7 6.825 2.4 1.9.9 3.025 2.575Q35.5 33.7 35.5 35.85v6.05Zm4.75-4.7h25.1v-1.15q0-.75-.425-1.45t-1.225-1.05q-3.3-1.55-5.65-2-2.35-.45-5.25-.45-2.85 0-5.275.475-2.425.475-5.675 1.975-.8.35-1.2 1.05-.4.7-.4 1.45Zm12.5-18.6q1.8 0 2.95-1.15 1.15-1.15 1.15-2.9 0-1.8-1.15-2.925Q20 10.5 18.25 10.5q-1.8 0-2.925 1.125Q14.2 12.75 14.2 14.55q0 1.75 1.125 2.9T18.2 18.6Zm.05-4.05Zm0 16.55Z",fill:e})})}function se(){return n("div",{className:z.divider})}const le="_profile__leftContent_1f4iw_1",de="_profile__leftContent__action_1f4iw_6",ce="_profile__leftContent__username_1f4iw_13",R={profile__leftContent:le,profile__leftContent__action:de,profile__leftContent__username:ce};function ae(){var C,q,E;const[e,i]=h.exports.useState(null),{data:s}=j(),{username:d}=k(),[S,{data:m,subscribeToMore:T}]=w(J),[M,{data:u}]=w(X),[x,{loading:N}]=_(D,{onCompleted({sendFriendRequest:l}){!l||i({...f,canUnSendFriendRequest:!0})}}),[U,{loading:Q}]=_(K,{onCompleted({cancelFriendRequest:l}){!l||i({...f,canSendFriendRequest:!0})}}),[Z,{loading:p}]=_(ee,{onCompleted({acceptFriendRequest:l}){!l||i({...f,canSendMessage:!0})}}),[P,{loading:v}]=_(ne,{onCompleted({declineFriendRequest:l}){!l||i({...f,canSendMessage:!0})}});function L(){if(!(!(t!=null&&t.id)||!(e!=null&&e.canSendFriendRequest)))return x({variables:{userId:t.id}})}function b(){if(!(!(t!=null&&t.id)||!(e!=null&&e.canUnSendFriendRequest)))return U({variables:{userId:t.id}})}function y(){if(!(!(t!=null&&t.id)||!(e!=null&&e.canAcceptFriendRequest)))return Z({variables:{userId:t.id}})}function O(){if(!(!(t!=null&&t.id)||!(e!=null&&e.canDeclineFriendRequest)))return P({variables:{userId:t.id}})}const t=d?(C=m==null?void 0:m.getProfile)!=null?C:null:s,g=d===(s==null?void 0:s.username);return h.exports.useEffect(()=>{d&&d.length>=4&&!g&&S({variables:{username:d}})},[d]),h.exports.useEffect(()=>{t!=null&&t.actions&&(i(B(t.actions)),g||M({variables:{userId:t.id}}))},[t]),h.exports.useEffect(()=>{d&&!g&&T({document:H,variables:{username:d},updateQuery(l,{subscriptionData:F}){return F.data?{getProfile:{...l.getProfile,actions:F.data.profileActionsChanged.actions}}:l}})},[]),n(G,{withHeader:!0,children:t&&n(r,{item:!0,xs:3,children:o(V,{className:R.profile__leftContent,children:[n("div",{className:R.profile__leftContent__action,children:o(r,{container:!0,justifyContent:"center",spacing:12,children:[n(r,{item:!0,children:e!=null&&e.canAcceptFriendRequest?n(c,{loading:p||v,onClick:y,size:"small",children:"Aceptar solicitud"}):null}),n(r,{item:!0,children:e!=null&&e.isMe?n(c,{link:!0,startIcon:n(re,{}),to:`/profile/${t.username}/settings`,children:"Editar perfil"}):(e==null?void 0:e.canSendMessage)&&(u==null?void 0:u.getChat)?n(c,{link:!0,startIcon:n(te,{}),to:`/chat/${u.getChat.id}`,children:"Enviar mensaje"}):e!=null&&e.canSendFriendRequest?n(c,{loading:N,onClick:L,startIcon:n(ie,{}),children:"Enviar solicitud"}):e!=null&&e.canUnSendFriendRequest?n(c,{color:"error",loading:Q,onClick:b,startIcon:n($,{}),children:"Cancelar solicitud"}):e!=null&&e.canDeclineFriendRequest?n(c,{color:"error",loading:p||v,onClick:O,size:"small",children:"Rechazar solicitud"}):null})]})}),o(r,{container:!0,justifyContent:"center",spacing:24,children:[n(r,{item:!0,xs:12,children:o(r,{container:!0,alignItems:"center",direction:"column",spacing:12,children:[n(r,{item:!0,children:n(Y,{size:"big",url:t.profileImage})}),n(r,{item:!0,children:n("span",{className:R.profile__leftContent__username,children:t.username})})]})}),n(r,{item:!0,xs:12,children:n(se,{})}),n(r,{item:!0,xs:12,children:o(r,{container:!0,spacing:12,children:[t.createdAt&&n(r,{item:!0,xs:12,children:n(A,{name:"Registro",value:W(new Date(t.createdAt),"MMMM yyyy")})}),n(r,{item:!0,xs:12,children:n(A,{name:"Amigos",value:((E=(q=t.counters)==null?void 0:q.friends)!=null?E:0).toString()})})]})})]})]})})})}export{ae as default};
